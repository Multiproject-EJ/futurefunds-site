<!doctype html>
<html lang="en" data-lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FutureFunds — Equity Analyst · Mr.ValueBot.ai</title>
  <link rel="stylesheet" href="/assets/styles.css" />
  <style>
    .editor-wrap{max-width:960px;margin:32px auto;padding:0 16px}
    .analyst-header{display:grid;gap:18px;margin-bottom:28px}
    .analyst-header__info{display:grid;gap:8px}
    .analyst-header__info .editor-title{margin:0}
    .analyst-header__info .editor-intro{margin:0}
    .analyst-header__panel{border:1px solid var(--border,#e5e7eb);border-radius:22px;background:var(--panel,#fff);box-shadow:0 14px 28px rgba(15,23,42,.08);padding:20px;display:grid;gap:20px}
    .analyst-badge{justify-self:center;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:16px;border:1px solid var(--border,#e5e7eb);border-radius:18px;background:var(--panel,#fff);box-shadow:0 12px 24px rgba(15,23,42,.06);width:100%;max-width:320px;min-height:164px;text-align:center}
    .analyst-badge__photo{width:68px;height:68px;border-radius:14px;overflow:hidden;background:var(--panel-muted,#f8fafc);display:flex;align-items:center;justify-content:center;border:1px solid var(--border,#e5e7eb)}
    .analyst-badge__photo img{width:100%;height:100%;object-fit:cover}
    .analyst-badge__name{font-size:1.05rem;font-weight:600;color:var(--text,#0f172a);margin:0}
    .analyst-badge__role{font-size:.78rem;color:var(--muted,#64748b);margin:0}
    .analyst-badge__stamp{font-size:.75rem;color:var(--muted,#64748b);margin:0}
    .analyst-badge__status{font-size:.78rem;color:var(--muted,#64748b);margin:0}
    .analyst-badge__status strong{color:var(--text,#0f172a)}
    .analyst-badge__actions{display:flex;flex-wrap:wrap;justify-content:center;gap:8px}
    .analyst-header__panel .coverage-meta{margin:0;height:100%}
    .analyst-header__panel .coverage-meta--compact{padding:0;border:none;box-shadow:none;background:transparent;gap:16px}
    .analyst-header__panel .coverage-meta__layout{height:100%}
    .analyst-header__panel .analyst-badge{justify-self:stretch;max-width:none;height:100%}
    @media (min-width:768px){
      .analyst-header__panel{grid-template-columns:minmax(0,.7fr) minmax(0,.3fr);align-items:stretch}
    }
    .editor-title{font-size:1.9rem;margin:0;color:var(--text,#0f172a);font-weight:700}
    .editor-intro{margin:0;color:var(--muted,#64748b)}
    .coverage-meta{margin:32px 0;padding:20px;border:1px solid var(--border,#e5e7eb);border-radius:18px;background:var(--panel,#fff);box-shadow:0 12px 24px rgba(15,23,42,.06);display:grid;gap:16px}
    .coverage-meta--compact{margin:0;padding:20px;gap:18px;box-shadow:0 10px 20px rgba(15,23,42,.05);height:100%}
    .coverage-meta--compact .coverage-meta__fields{grid-template-columns:1fr}
    .coverage-meta__title{margin:0;font-size:1.15rem;font-weight:600;color:var(--text,#0f172a)}
    .coverage-meta__layout{display:grid;gap:18px}
    @media (min-width:768px){.coverage-meta__layout{grid-template-columns:minmax(0,1.2fr) minmax(0,.8fr);align-items:start}}
    .coverage-meta__fields{display:grid;gap:18px;grid-template-columns:1fr;height:100%}
    .coverage-meta__form-card{display:grid;gap:16px;padding:18px;border:1px solid var(--border,#e5e7eb);border-radius:14px;background:var(--panel-muted,#f8fafc);height:100%;transition:box-shadow .2s ease,border-color .2s ease}
    .coverage-meta__optional{opacity:.6;filter:saturate(.85);transition:opacity .2s ease,filter .2s ease}
    .coverage-meta__optional input{background:rgba(148,163,184,.12);border-color:rgba(148,163,184,.3);transition:background .2s ease,border-color .2s ease,box-shadow .2s ease}
    .coverage-meta__form-card--has-company .coverage-meta__optional{opacity:1;filter:none}
    .coverage-meta__form-card--has-company .coverage-meta__optional input{background:var(--panel,#fff);border-color:var(--border,#e5e7eb)}
    .coverage-meta__field-grid{display:grid;gap:14px}
    @media (min-width:640px){.coverage-meta__field-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    .coverage-meta__field{display:grid;gap:6px}
    .coverage-meta__hint{margin:0;font-size:.8rem;color:var(--muted,#64748b)}
    .coverage-meta__field-row{display:flex;flex-wrap:wrap;align-items:center;gap:12px}
    .coverage-meta__field-row input{flex:1 1 220px;min-width:0}
    .coverage-meta label{display:block;font-size:.85rem;font-weight:600;color:var(--muted,#64748b);margin-bottom:6px}
    .coverage-meta__field-row label{display:inline-flex;margin:0;white-space:nowrap}
    .coverage-meta input{width:100%;padding:12px 14px;border:1px solid var(--border,#e5e7eb);border-radius:12px;background:var(--panel,#fff);color:var(--text,#0f172a);transition:border-color .2s ease,background .2s ease,box-shadow .2s ease}
    .coverage-meta input#aiCompany{background:rgba(37,99,235,.12);border-color:rgba(37,99,235,.32)}
    .coverage-meta input#aiCompany:focus{background:var(--panel,#fff);border-color:var(--accent,#2563eb);box-shadow:0 0 0 3px rgba(37,99,235,.18);outline:none}
    .coverage-meta .muted-small{margin:6px 0 0}
    .coverage-meta__aside{position:relative;overflow:hidden;border:1px solid var(--border,#e5e7eb);border-radius:14px;background:linear-gradient(135deg,rgba(37,99,235,.08),rgba(37,99,235,.02));display:block;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease}
    .coverage-meta__aside:hover,.coverage-meta__aside:focus-within{border-color:var(--accent,#2563eb);box-shadow:0 12px 26px rgba(37,99,235,.14);transform:translateY(-1px)}
    .coverage-meta__automation{display:grid;gap:14px;padding:20px;width:100%;height:100%;border:none;background:transparent;font:inherit;color:inherit;text-align:left;cursor:pointer}
    .coverage-meta__automation:focus-visible{outline:3px solid rgba(37,99,235,.35);outline-offset:-4px;border-radius:12px}
    .coverage-meta__automation-head{display:grid;gap:6px}
    .coverage-meta__aside-title{margin:0;font-size:.95rem;font-weight:600;color:var(--text,#0f172a)}
    .coverage-meta__aside-copy{margin:0;font-size:.85rem;color:var(--muted,#475569)}
    .automation-stats{display:grid;gap:12px;padding:0;margin:0;list-style:none}
    .automation-stats__item{display:flex;align-items:center;gap:12px;padding:12px;border:1px solid rgba(148,163,184,.35);border-radius:12px;background:rgba(248,250,252,.85);box-shadow:0 8px 16px rgba(15,23,42,.08)}
    .automation-stats__icon{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.05rem;font-weight:600;color:#fff}
    .automation-stats__icon--scheduled{background:linear-gradient(135deg,#2563eb,#60a5fa)}
    .automation-stats__icon--errors{background:linear-gradient(135deg,#10b981,#34d399)}
    .automation-stats__icon--errors[data-state="warn"]{background:linear-gradient(135deg,#f97316,#fb7185)}
    .automation-stats__label{margin:0;font-size:.8rem;color:var(--muted,#475569);letter-spacing:.02em;text-transform:uppercase}
    .automation-stats__value{margin:2px 0 0;font-size:1.1rem;font-weight:600;color:var(--text,#0f172a)}
    .automation-stats__value--warn{color:var(--danger,#ef4444)}
    .automation-stats__meta{margin:0;font-size:.75rem;color:var(--muted,#64748b)}
    .automation-stats__meta--warn{color:var(--danger,#ef4444);font-weight:600}
    .summary-card--combined{display:grid;gap:18px}
    .summary-card__head{display:flex;align-items:center;justify-content:space-between}
    .summary-card__sections{display:grid;gap:16px}
    @media (min-width:960px){.summary-card__sections{grid-template-columns:1.4fr 1fr}}
    .summary-card--task{gap:20px}
    .summary-card--task .summary-card__title{font-size:1.25rem}
    .summary-card--task .summary-card__sections{grid-template-columns:1fr}
    @media (min-width:960px){.summary-card--task .summary-card__sections{grid-template-columns:1fr}}
    .summary-subcard{border:1px solid var(--border,#e5e7eb);border-radius:16px;background:var(--panel-muted,#f8fafc);padding:16px;display:grid;gap:14px}
    .summary-subcard__title{margin:0;font-size:1.05rem;font-weight:600;color:var(--text,#0f172a)}
    .summary-subcard__content{display:grid;gap:14px}
    .summary-subcard__content--tasks{grid-template-columns:repeat(auto-fit,minmax(180px,1fr));align-items:stretch}
    .summary-subcard__content .muted-small{margin:4px 0 0}
    .ai-structures{display:grid;gap:14px}
    .ai-structures .field-row{margin:0;gap:12px}
    .ai-structures .field-row>div{min-width:0}
    .ai-structures .ai-key-actions{margin-top:6px}
    .editor-summary-grid{display:grid;gap:18px;margin-bottom:28px}
    @media (min-width:768px){.editor-summary-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    .editor-summary-grid--full{grid-template-columns:1fr}
    @media (min-width:768px){.editor-summary-grid.editor-summary-grid--full{grid-template-columns:1fr}}
    .summary-card{border:1px solid var(--border,#e5e7eb);border-radius:18px;background:var(--panel,#fff);padding:18px;display:grid;gap:12px;box-shadow:0 10px 22px rgba(15,23,42,.05)}
    .summary-card__title{margin:0;font-size:1.05rem;font-weight:600;color:var(--text,#0f172a)}
    .summary-card__content{font-size:.92rem;color:var(--muted,#64748b);display:grid;gap:8px}
    .process-steps{list-style:none;margin:0;padding:0;display:grid;gap:8px}
    .process-step{display:flex;align-items:center;gap:12px;padding:8px 12px;border-radius:14px;border:1px solid var(--border,#e5e7eb);background:var(--panel-muted,#f8fafc);transition:background .2s ease,border-color .2s ease,box-shadow .2s ease}
    .process-step__icon{position:relative;flex-shrink:0;width:30px;height:30px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;color:var(--muted,#64748b)}
    .process-step__icon::after{content:attr(data-step);display:flex;align-items:center;justify-content:center;width:100%;height:100%;border-radius:inherit;background:#fff;border:2px solid currentColor;font-size:.85rem;font-weight:600;box-sizing:border-box;transition:background .2s ease,color .2s ease,border-color .2s ease}
    .process-step__icon::before{content:"";position:absolute;inset:6px;border-radius:inherit;border:2px solid transparent;opacity:0}
    .process-step__body{flex:1}
    .process-step__line{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:0;font-size:.86rem;color:var(--muted,#64748b)}
    .process-step__title{font-weight:600;color:var(--text,#0f172a);font-size:.9rem}
    .process-step__meta{color:var(--muted,#64748b);font-size:.82rem}
    .process-step__meta::before{content:"•";margin-right:6px;opacity:.55}
    .process-step[data-status="complete"]{background:rgba(49,208,163,.12);border-color:rgba(49,208,163,.32)}
    .process-step[data-status="complete"] .process-step__icon{color:var(--ok,#31d0a3)}
    .process-step[data-status="complete"] .process-step__icon::after{content:"✓";background:var(--ok,#31d0a3);color:#fff;border-color:var(--ok,#31d0a3)}
    .process-step[data-status="complete"] .process-step__title{color:var(--ok,#0f766e)}
    .process-step[data-status="complete"] .process-step__meta{color:rgba(15,118,110,.85)}
    .process-step[data-status="active"]{border-color:var(--accent,#2563eb);background:rgba(37,99,235,.12);box-shadow:0 0 0 1px rgba(37,99,235,.16)}
    .process-step[data-status="active"] .process-step__icon{color:var(--accent,#2563eb)}
    .process-step[data-status="active"] .process-step__icon::after{content:"";background:transparent;border-color:rgba(37,99,235,.32)}
    .process-step[data-status="active"] .process-step__icon::before{opacity:1;border-top-color:var(--accent,#2563eb);border-right-color:var(--accent,#2563eb);animation:processSpin .85s linear infinite}
    .process-step[data-status="active"] .process-step__title{color:var(--accent,#2563eb)}
    .process-step[data-status="active"] .process-step__meta{color:rgba(37,99,235,.85)}
    .process-step[data-status="upcoming"] .process-step__icon{color:var(--muted,#94a3b8)}
    .process-step[data-status="upcoming"] .process-step__icon::after{background:#fff;border-style:dashed;color:var(--muted,#94a3b8)}
    .process-step[data-status="upcoming"] .process-step__title{color:var(--text,#0f172a)}
    .process-step[data-status="upcoming"] .process-step__meta{color:var(--muted,#94a3b8)}
    @keyframes processSpin{to{transform:rotate(360deg)}}
    .ai-settings-list{list-style:none;margin:0;padding:0;display:grid;gap:8px}
    .ai-settings-list li{display:flex;flex-direction:column;gap:2px}
    .ai-settings-list strong{font-size:.9rem;color:var(--text,#0f172a)}
    .ai-settings-list span{font-size:.85rem;color:var(--muted,#64748b)}
    .task-launch-card{display:grid;gap:4px;padding:16px;border:1px solid var(--border,#e5e7eb);border-radius:14px;background:var(--panel,#fff);text-align:left;cursor:pointer;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease;color:inherit;font:inherit;width:100%}
    .task-launch-card:hover:not(:disabled){border-color:var(--accent,#2563eb);box-shadow:0 14px 26px rgba(37,99,235,.15);transform:translateY(-2px)}
    .task-launch-card:focus-visible{outline:3px solid rgba(37,99,235,.35);outline-offset:2px;border-color:var(--accent,#2563eb);box-shadow:0 14px 26px rgba(37,99,235,.15);transform:translateY(-2px)}
    .task-launch-card:disabled{cursor:not-allowed;opacity:.6;box-shadow:none;transform:none}
    .task-launch-card[data-state="locked"]{border-style:dashed;opacity:.78;cursor:pointer;box-shadow:none;transform:none}
    .task-launch-card[data-state="locked"]:hover{border-color:var(--border,#e5e7eb);box-shadow:none;transform:none}
    .task-launch-card[data-state="locked"] .task-launch-card__subtitle{color:var(--warn,#f6b73c);font-weight:600}
    .task-launch-card__title{font-size:1.05rem;font-weight:600;color:var(--text,#0f172a)}
    .task-launch-card__subtitle{font-size:.85rem;color:var(--muted,#64748b)}
    .editor-grid{display:grid;gap:18px}
    .editor-grid label{display:block;font-size:.9rem;margin-bottom:4px;color:var(--muted,#64748b)}
    .editor-grid input,.editor-grid textarea, .editor-grid select{
      width:100%;padding:12px 14px;border:1px solid var(--border,#e5e7eb);border-radius:12px;background:var(--panel,#fff);
      color:var(--text,#0f172a);
    }
    .editor-grid textarea{min-height:120px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;resize:vertical;box-sizing:border-box}
    .field-row{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .muted-small{color:var(--muted,#64748b);font-size:.9rem;margin:4px 0 0}
    .analysis-export{display:grid;gap:18px}
    .analysis-export__title{margin:0;font-size:1.15rem;font-weight:600;color:var(--text,#0f172a)}
    .analysis-export__fields{display:grid;gap:18px}
    .analysis-export__actions{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .analysis-export__actions .muted{margin:0}
    .recent-list{margin-top:22px;display:grid;gap:12px}
    .recent-card{border:1px solid var(--border,#e5e7eb);border-radius:12px;padding:16px;background:var(--panel,#fff);}
    .recent-card h3{margin:0 0 6px}
    .recent-card .tags{margin-top:6px}
    .note-box button{margin-left:10px}
    .analysis-task{border:1px solid var(--border,#e5e7eb);border-radius:20px;padding:24px;background:var(--panel,#fff);box-shadow:0 12px 26px rgba(15,23,42,.06);display:grid;gap:24px}
    .analysis-task__head{display:flex;align-items:center;justify-content:space-between}
    .analysis-task__title{margin:0;font-size:1.3rem;font-weight:700;color:var(--text,#0f172a)}
    .analysis-task__grid{display:grid;gap:20px}
    @media (min-width:960px){.analysis-task__grid{grid-template-columns:minmax(0,1.2fr) minmax(0,1fr)}}
    .analysis-task__panel{border:1px solid var(--border,#e5e7eb);border-radius:16px;padding:20px;background:var(--panel-muted,#f8fafc);display:grid;gap:16px}
    .analysis-task__panel .muted-small{margin:4px 0 0}
    .modal__dialog--cost{max-width:560px}
    .modal__body--cost{display:grid;gap:18px;padding:20px}
    .modal__footer--cost{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px 20px}
    .cost-meter{display:grid;gap:14px;padding:18px;border:1px solid var(--border,#e5e7eb);border-radius:16px;background:var(--panel-muted,#f8fafc)}
    .cost-meter__stats{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}
    .cost-meter__label{margin:0;font-size:.75rem;letter-spacing:.04em;text-transform:uppercase;color:var(--muted,#64748b)}
    .cost-meter__value{margin:2px 0 0;font-size:1.1rem;font-weight:600;color:var(--text,#0f172a)}
    .cost-meter__actions{display:flex;flex-wrap:wrap;gap:8px}
    .cost-meter__manual{display:grid;gap:6px}
    .cost-meter__manual label{font-size:.85rem;font-weight:600;color:var(--muted,#64748b)}
    .cost-meter__manual-row{display:flex;gap:8px;flex-wrap:wrap}
    .cost-meter__manual-row input{flex:1 1 160px;min-width:0;padding:10px 12px;border:1px solid var(--border,#e5e7eb);border-radius:10px;background:var(--panel,#fff);color:var(--text,#0f172a)}
    .cost-meter__manual-row select{flex:0 1 120px;padding:10px 12px;border:1px solid var(--border,#e5e7eb);border-radius:10px;background:var(--panel,#fff);color:var(--text,#0f172a)}
    .cost-meter__status{margin:0;font-size:.85rem;color:var(--muted,#64748b)}
    .cost-meter__status[data-tone="success"]{color:var(--ok,#31d0a3)}
    .cost-meter__status[data-tone="error"]{color:var(--danger,#ef4444)}
    .cost-history{display:grid;gap:12px}
    .cost-history__head{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .cost-history__list{list-style:none;margin:0;padding:0;display:grid;gap:10px;max-height:220px;overflow:auto}
    .cost-history__item{border:1px solid var(--border,#e5e7eb);border-radius:12px;padding:12px;background:var(--panel,#fff);display:grid;gap:4px}
    .cost-history__item strong{font-size:.95rem;color:var(--text,#0f172a)}
    .cost-history__item-meta{font-size:.78rem;color:var(--muted,#64748b)}
    .cost-history__delta{font-size:.82rem;font-weight:600;color:var(--accent,#2563eb)}
    .analysis-task__panel textarea{background:var(--panel,#fff)}
    .analysis-task__config{gap:20px}
    .task-name-field{display:grid;gap:8px}
    .analysis-source{display:grid;gap:14px}
    .analysis-source__head{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
    .analysis-source__modes{display:flex;gap:8px;flex-wrap:wrap}
    .analysis-mode-btn{border:1px solid var(--border,#e5e7eb);background:transparent;color:var(--muted,#64748b);padding:8px 12px;border-radius:999px;font-size:.85rem;cursor:pointer;transition:border-color .15s ease,background .15s ease,color .15s ease}
    .analysis-mode-btn.active{background:var(--accent,#2563eb);color:#fff;border-color:var(--accent,#2563eb)}
    .analysis-mode-btn:not(.active):hover{border-color:var(--accent,#2563eb);color:var(--accent,#2563eb)}
    .analysis-source__panel{display:grid;gap:12px}
    .analysis-source textarea{min-height:200px}
    .analysis-source__actions{display:flex;flex-wrap:wrap;align-items:center;gap:10px}
    .analysis-status[data-tone="error"]{color:var(--danger,#ff6b6b)}
    .analysis-status[data-tone="success"]{color:var(--ok,#31d0a3)}
    .analysis-status[data-tone="info"]{color:var(--muted,#64748b)}
    .analysis-source__panel-note{color:var(--muted,#64748b);font-size:.85rem;margin:0}
    .analysis-ai-grid{display:grid;gap:12px}
    .analysis-ai-grid .field-row{margin:0}
    .analysis-ai-grid textarea{min-height:100px}
    .ai-key-actions{display:flex;gap:10px;align-items:center;margin-top:8px;flex-wrap:wrap}
    .ai-key-preview{margin-top:6px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;word-break:break-all;color:var(--muted,#64748b)}
    .prompt-selector{position:relative;display:inline-flex;align-items:center;gap:8px;flex-wrap:wrap}
    .prompt-menu{position:absolute;top:calc(100% + 6px);left:0;min-width:260px;padding:8px;border:1px solid var(--border,#e5e7eb);border-radius:12px;background:var(--panel,#fff);box-shadow:0 12px 30px rgba(15,23,42,.12);display:grid;gap:6px;z-index:40}
    .prompt-menu[hidden]{display:none}
    .prompt-menu button{border:none;background:transparent;text-align:left;padding:8px 10px;border-radius:10px;font-size:.9rem;color:var(--text,#0f172a);cursor:pointer;transition:background .15s ease,color .15s ease}
    .prompt-menu button strong{display:block;font-weight:600}
    .prompt-menu button span{display:block;font-size:.8rem;color:var(--muted,#64748b);margin-top:2px}
    .prompt-menu button:hover{background:rgba(37,99,235,.08)}
    .prompt-menu button.active{background:var(--accent,#2563eb);color:#fff}
    .prompt-menu button.active span{color:rgba(255,255,255,.85)}
    .prompt-details{margin-top:8px;border:1px solid var(--border,#e5e7eb);border-radius:12px;padding:12px;background:rgba(148,163,184,.1);font-size:.85rem;color:var(--muted,#64748b)}
    .prompt-preview{margin-top:6px;padding:12px;border:1px solid var(--border,#e5e7eb);border-radius:12px;background:var(--panel,#fff);max-height:220px;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:.78rem;line-height:1.4;color:var(--text,#0f172a);width:100%;max-width:100%;box-sizing:border-box;white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}
    .select-edit{display:flex;align-items:center;gap:8px}
    .select-edit select{flex:1 1 auto}
    .model-editor{display:grid;gap:14px}
    .model-editor textarea{min-height:140px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .model-editor__status{min-height:18px;font-size:.85rem;color:var(--muted,#64748b)}
    .model-editor__status[data-tone="error"]{color:var(--danger,#ff6b6b)}
    .model-editor__status[data-tone="success"]{color:var(--ok,#31d0a3)}
    .model-editor__status[data-tone="info"]{color:var(--muted,#64748b)}
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:20px;z-index:120}
    .modal[hidden]{display:none}
    .modal__backdrop{position:absolute;inset:0;background:rgba(15,23,42,.55)}
    .modal__dialog{position:relative;background:var(--panel,#fff);color:var(--text,#0f172a);border-radius:18px;max-width:960px;width:100%;max-height:90vh;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 24px 60px rgba(15,23,42,.28)}
    .modal__header,.modal__footer{padding:18px 24px;border-color:var(--border,#e5e7eb);display:flex;align-items:center}
    .modal__header{justify-content:space-between;border-bottom:1px solid var(--border,#e5e7eb);gap:12px}
    .modal__footer{justify-content:flex-end;gap:12px;border-top:1px solid var(--border,#e5e7eb)}
    .modal__body{display:grid;grid-template-columns:260px 1fr;gap:0;min-height:420px}
    .modal__sidebar{background:var(--panel-muted,#f8fafc);border-right:1px solid var(--border,#e5e7eb);padding:18px;overflow:auto}
    .modal__content{padding:18px;overflow:auto;display:grid;gap:16px}
    .modal__dialog--task{max-width:1020px;width:100%}
    .modal__header--task{border-bottom:1px solid var(--border,#e5e7eb)}
    .modal__body--task{padding:0;overflow:auto;background:var(--panel-muted,#f8fafc)}
    .modal__dialog--automation{max-width:960px}
    .modal__body--automation{grid-template-columns:280px 1fr}
    .automation-modal__sidebar{display:grid;gap:16px}
    .automation-modal__sidebar h3{margin:0;font-size:1rem;font-weight:600;color:var(--text,#0f172a)}
    .automation-modal__sidebar p{margin:0;color:var(--muted,#475569);font-size:.88rem;line-height:1.45}
    .automation-modal__list{display:grid;gap:10px;margin-top:6px}
    .automation-modal__list li{display:flex;align-items:center;gap:8px;font-size:.82rem;color:var(--muted,#64748b)}
    .automation-modal__list li::before{content:"";width:6px;height:6px;border-radius:999px;background:var(--accent,#2563eb);flex-shrink:0}
    .automation-form{display:grid;gap:18px}
    .automation-form__section{display:grid;gap:12px;padding:18px;border:1px solid var(--border,#e5e7eb);border-radius:16px;background:var(--panel,#fff);box-shadow:0 8px 18px rgba(15,23,42,.07)}
    .automation-form__section h4{margin:0;font-size:1rem;font-weight:600;color:var(--text,#0f172a)}
    .automation-form__fields{display:grid;gap:12px}
    .automation-radio-group{display:grid;gap:8px}
    .automation-radio{display:flex;align-items:center;gap:10px;padding:10px 12px;border:1px solid rgba(148,163,184,.4);border-radius:12px;background:var(--panel-muted,#f8fafc);cursor:pointer;transition:border-color .15s ease,background .15s ease,box-shadow .15s ease}
    .automation-radio input{margin:0}
    .automation-radio:hover{border-color:var(--accent,#2563eb)}
    .automation-radio:focus-within{border-color:var(--accent,#2563eb);box-shadow:0 0 0 2px rgba(37,99,235,.22)}
    .automation-radio input:focus-visible{outline:none}
    .automation-radio__label{display:flex;flex-direction:column;gap:2px;font-size:.9rem;color:var(--text,#0f172a)}
    .automation-radio__hint{font-size:.8rem;color:var(--muted,#64748b)}
    .automation-radio input:checked+.automation-radio__label{color:var(--accent,#2563eb)}
    .automation-radio input:checked+.automation-radio__label .automation-radio__hint{color:rgba(37,99,235,.72)}
    .automation-field{display:grid;gap:6px}
    .automation-field label{font-size:.85rem;font-weight:600;color:var(--muted,#64748b)}
    .automation-field input,.automation-field select,.automation-field textarea{width:100%;padding:10px 12px;border:1px solid var(--border,#e5e7eb);border-radius:10px;background:var(--panel,#fff);color:var(--text,#0f172a)}
    .automation-field textarea{min-height:100px;resize:vertical}
    .automation-tasks{display:grid;gap:10px}
    .automation-task-item{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;border:1px dashed rgba(148,163,184,.5);border-radius:12px;background:rgba(148,163,184,.1);cursor:pointer}
    .automation-task-item input{margin-top:4px}
    .automation-task-item__body{display:flex;flex-direction:column;gap:2px}
    .automation-task-item__title{display:block;font-size:.88rem;font-weight:600;color:var(--text,#0f172a)}
    .automation-task-item__hint{display:block;font-size:.78rem;color:var(--muted,#64748b)}
    .automation-advanced{display:grid;gap:10px}
    .automation-advanced .automation-field{margin:0}
    .automation-footer__note{margin-right:auto;color:var(--muted,#64748b);font-size:.85rem}
    @media(max-width:960px){
      .modal__body--automation{grid-template-columns:1fr}
      .automation-modal__sidebar{border-bottom:1px solid var(--border,#e5e7eb);padding-bottom:16px;margin-bottom:16px}
    }
    .modal__body--task .analysis-task{margin:0}
    .prompt-editor__sidebar-actions{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;gap:10px}
    .prompt-editor__list{display:grid;gap:8px}
    .prompt-editor__list button{width:100%;text-align:left;border:1px solid transparent;border-radius:10px;padding:10px 12px;background:transparent;color:inherit;cursor:pointer;transition:background .15s ease,border-color .15s ease,color .15s ease}
    .prompt-editor__list button strong{display:block;font-weight:600}
    .prompt-editor__list button span{display:block;font-size:.8rem;color:var(--muted,#64748b);margin-top:2px}
    .prompt-editor__list button:hover{border-color:var(--accent,#2563eb)}
    .prompt-editor__list button.active{background:var(--accent,#2563eb);color:#fff;border-color:var(--accent,#2563eb)}
    .prompt-editor__list button.active span{color:rgba(255,255,255,.85)}
    .prompt-editor__list button[data-archived="true"]{opacity:.72}
    .prompt-editor__empty{color:var(--muted,#64748b);font-size:.9rem}
    .prompt-editor__form{display:grid;gap:16px}
    .prompt-editor__form .field-group{display:grid;gap:6px}
    .prompt-editor__form label{font-weight:600;font-size:.9rem}
    .prompt-editor__form input,.prompt-editor__form textarea{padding:10px 12px;border:1px solid var(--border,#e5e7eb);border-radius:10px;background:var(--panel,#fff);color:var(--text,#0f172a)}
    .prompt-editor__form textarea{min-height:220px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;width:100%;max-width:100%;box-sizing:border-box;overflow:auto}
    .prompt-editor__row{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
    .prompt-editor__toggles{display:flex;gap:18px;flex-wrap:wrap;align-items:center}
    .prompt-editor__toggle{display:flex;gap:8px;align-items:center;font-size:.9rem;color:var(--muted,#64748b)}
    .prompt-editor__toggle input{margin:0}
    .prompt-editor__status{min-height:18px}
    .modal__content--stack{padding:24px;display:grid;gap:18px}
  </style>
</head>
<body>
  <header class="site-header">
    <a class="brand" href="/">
      <img src="/images/logo.webp" alt="FutureFunds.ai logo" class="logo" />
      <span>FutureFunds.ai</span>
    </a>
    <button class="nav-toggle" id="navToggle" type="button" aria-expanded="false" aria-controls="siteNav">
      <span class="sr-only">Menu</span>
      <span class="nav-toggle__bar"></span>
    </button>
    <nav class="nav" id="siteNav" aria-label="Primary navigation">
      <div class="nav-links">
        <div class="nav-item nav-item--team">
          <a href="/team.html" class="nav-link" data-i18n="nav.team">Experiment</a>
        </div>
        <div class="nav-item nav-item--has-panel nav-item--tools">
          <a href="/tools.html" class="nav-link" data-i18n="nav.investmentTools">Investment Tools</a>
          <div class="nav-panel nav-panel--tools" role="group" aria-label="Investment tools">
            <div class="nav-panel__header">
              <span class="nav-panel__title">Featured tools</span>
              <a class="nav-panel__cta" href="/tools.html">Explore tools →</a>
            </div>
            <div class="nav-panel__content nav-panel__content--tools">
              <a class="nav-tool" href="/tool.html?id=ff-pms">
                <span class="chip membership">Member</span>
                <h4>Portfolio OS</h4>
                <p>Run strategies end-to-end with sheets + AI copilots.</p>
              </a>
              <a class="nav-tool" href="/tool.html?id=stockalpha-journal">
                <span class="chip free">Free</span>
                <h4>StockAlpha Journal</h4>
                <p>Track theses, catalysts, and behavioral loops.</p>
              </a>
              <a class="nav-tool" href="/tool.html?id=valuebot">
                <span class="chip paid">Paid</span>
                <h4>ValueBot Valuation</h4>
                <p>Get sourced, step-by-step valuations on demand.</p>
              </a>
            </div>
          </div>
        </div>
        <div class="nav-item nav-item--has-panel nav-item--ai">
          <a href="/ai-economy.html" class="nav-link" data-i18n="nav.aiEconomy">The AI Economy</a>
          <div class="nav-panel nav-panel--ai" role="group" aria-label="AI economy preview">
            <div class="nav-panel__header">
              <span class="nav-panel__title">AI economy brief</span>
              <a class="nav-panel__cta" href="/ai-economy.html">Dive in →</a>
            </div>
            <div class="nav-ai">
              <p class="nav-ai__pitch">Weekly signals on how automation, capital, and policy collide. Built from filings, expert transcripts, and on-chain data.</p>
              <form class="nav-ai__signup newsletter-form" action="/ai-economy.html#newsletter" method="get">
                <label class="sr-only" for="nav-ai-email">Email address</label>
                <input id="nav-ai-email" type="email" name="email" placeholder="you@example.com" autocomplete="email" />
                <button type="submit" class="btn primary">Get the brief</button>
                <p class="nav-ai__status newsletter-status muted" aria-live="polite"></p>
              </form>
            </div>
          </div>
        </div>
        <a href="/portfolio.html" class="nav-link" data-i18n="nav.portfolios">Portfolios</a>
        <a href="/universe.html" class="nav-link" data-i18n="nav.universe">Universe</a>
      </div>
      <div class="nav-actions">
        <button id="langBtn" class="btn small">EN ▾</button>
        <button id="themeToggle" class="btn small ghost theme-toggle" aria-label="Toggle theme">
          <span class="theme-toggle__icon" aria-hidden="true">🌗</span>
          <span class="theme-toggle__label" data-i18n="nav.themeToggle">Theme</span>
        </button>
        <a id="membershipLogin" class="btn danger" href="/membership.html" data-i18n="cta.membership">Membership</a>
      </div>
    </nav>
  </header>

  <main class="editor-wrap">
    <section class="analyst-header" aria-label="Portfolio manager identification">
      <div class="analyst-header__info">
        <h1 class="editor-title">Equity Analyst</h1>
        <p class="muted editor-intro">Create and publish research entries into the Universe feed. Admin access only.</p>
      </div>
      <div class="analyst-header__panel">
        <section class="coverage-meta coverage-meta--compact" aria-label="Coverage target">
          <h2 class="coverage-meta__title">Coverage target</h2>
          <div class="coverage-meta__layout">
            <div class="coverage-meta__fields">
              <div class="coverage-meta__form-card">
                <div class="coverage-meta__field">
                  <div class="coverage-meta__field-row">
                    <label for="aiCompany">Company</label>
                    <input id="aiCompany" placeholder="Insmed Incorporated" autocomplete="off" />
                  </div>
                </div>
                <div class="coverage-meta__field-grid">
                  <div class="coverage-meta__field coverage-meta__optional">
                    <div class="coverage-meta__field-row">
                      <label for="aiTicker">Ticker (optional)</label>
                      <input id="aiTicker" placeholder="INSM" autocomplete="off" />
                    </div>
                  </div>
                  <div class="coverage-meta__field coverage-meta__optional">
                    <div class="coverage-meta__field-row">
                      <label for="aiExchange">Exchange (optional)</label>
                      <input id="aiExchange" placeholder="NASDAQ" autocomplete="off" />
                    </div>
                  </div>
                </div>
                <p class="coverage-meta__hint">Only the company name is required to run a prompt.</p>
                <p class="coverage-meta__hint">What can I help you with?</p>
              </div>
            </div>
            <aside class="coverage-meta__aside" aria-label="Automation workspace launcher">
              <button
                type="button"
                class="coverage-meta__automation"
                data-automation-modal-target="automationSettingsModal"
                aria-controls="automationSettingsModal"
              >
                <div class="coverage-meta__automation-head">
                  <h3 class="coverage-meta__aside-title">Automation</h3>
                  <p class="coverage-meta__aside-copy">Configure scheduled single-run or multi-step desk automations.</p>
                </div>
                <div
                  class="automation-stats"
                  aria-label="Automation status overview"
                  role="list"
                  data-scheduled="5"
                  data-errors="0"
                  data-scheduled-meta="Next run in 2 hours"
                  data-error-meta="All automations healthy"
                >
                  <div class="automation-stats__item" role="listitem">
                    <span class="automation-stats__icon automation-stats__icon--scheduled" aria-hidden="true">⏱</span>
                    <div>
                      <p class="automation-stats__label">Scheduled automations</p>
                      <p class="automation-stats__value" data-automation-field="scheduled-value">5</p>
                      <p class="automation-stats__meta" data-automation-field="scheduled-meta">Next run in 2 hours</p>
                    </div>
                  </div>
                  <div class="automation-stats__item" role="listitem">
                    <span class="automation-stats__icon automation-stats__icon--errors" data-automation-field="error-icon" aria-hidden="true">✔</span>
                    <div>
                      <p class="automation-stats__label">Error status</p>
                      <p class="automation-stats__value" data-automation-field="error-value">0 issues</p>
                      <p class="automation-stats__meta" data-automation-field="error-meta">All automations healthy</p>
                    </div>
                  </div>
                </div>
              </button>
            </aside>
          </div>
        </section>
        <div class="analyst-badge">
          <div class="analyst-badge__photo" aria-hidden="true">
            <img src="/images/ai-chip-placeholder.svg" alt="AI chip placeholder" />
          </div>
          <p class="analyst-badge__name">ValueBot <span id="analystLastName">Model</span></p>
          <p class="analyst-badge__role">Portfolio Manager ID · Equity Analyst Desk</p>
          <p class="analyst-badge__stamp">Issued <span id="analystDateStamp"></span></p>
          <p class="analyst-badge__status" id="costSnapshotSummary">Track API spend with snapshots.</p>
          <div class="analyst-badge__actions">
            <button
              type="button"
              class="btn small ghost"
              id="openCostModal"
              aria-haspopup="dialog"
              aria-controls="costSnapshotModal"
            >
              Cost snapshot
            </button>
          </div>
        </div>
      </div>
    </section>

    <div class="editor-summary-grid editor-summary-grid--full" aria-label="Workflow console">
      <article class="summary-card summary-card--combined summary-card--task" aria-label="Task overview">
        <header class="summary-card__head">
          <h2 class="summary-card__title">Buyback Extreme</h2>
        </header>
        <div class="summary-card__sections">
          <section class="summary-subcard" aria-label="Process progress">
            <h3 class="summary-subcard__title">Process Progress</h3>
            <div class="summary-subcard__content">
              <ul class="process-steps" id="analysisProgress" data-auto-cycle="true" data-demo-interval="2600">
            <li class="process-step" data-step-id="round-1" data-status="active">
              <span class="process-step__icon" data-step="1" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 1 — Discovery kickoff question</span>
                  <span class="process-step__meta">Capture new tickers and catalysts for the desk.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-2" data-status="upcoming">
              <span class="process-step__icon" data-step="2" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 2 — Market context question</span>
                  <span class="process-step__meta">Sync macro signals and the universe list to prioritise coverage.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-3" data-status="upcoming">
              <span class="process-step__icon" data-step="3" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 3 — Hypothesis framing question</span>
                  <span class="process-step__meta">Translate discovery notes into the thesis we need to test.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-4" data-status="upcoming">
              <span class="process-step__icon" data-step="4" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 4 — Evidence gathering question</span>
                  <span class="process-step__meta">Pull filings, transcripts and KPI references for validation.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-5" data-status="upcoming">
              <span class="process-step__icon" data-step="5" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 5 — Model wiring question</span>
                  <span class="process-step__meta">Draft the valuation scaffolding and anchor the inputs.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-6" data-status="upcoming">
              <span class="process-step__icon" data-step="6" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 6 — Thesis validation question</span>
                  <span class="process-step__meta">Pressure-test assumptions versus the collected data quality.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-7" data-status="upcoming">
              <span class="process-step__icon" data-step="7" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 7 — Risk audit question</span>
                  <span class="process-step__meta">Score downside scenarios and mitigation paths.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-8" data-status="upcoming">
              <span class="process-step__icon" data-step="8" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 8 — Timing window question</span>
                  <span class="process-step__meta">Review catalysts, liquidity and market timing cues.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-9" data-status="upcoming">
              <span class="process-step__icon" data-step="9" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 9 — Publication assembly question</span>
                  <span class="process-step__meta">Compose the research narrative and compliance checklist.</span>
                </p>
              </div>
            </li>
            <li class="process-step" data-step-id="round-10" data-status="upcoming">
              <span class="process-step__icon" data-step="10" aria-hidden="true"></span>
              <div class="process-step__body">
                <p class="process-step__line">
                  <span class="process-step__title">Round 10 — Share-out &amp; next questions</span>
                  <span class="process-step__meta">Publish to the Universe and push follow-up questions to the team.</span>
                </p>
              </div>
            </li>
              </ul>
            </div>
          </section>
          <section class="summary-subcard" aria-label="Work tasks">
            <h3 class="summary-subcard__title">Work Tasks</h3>
            <div class="summary-subcard__content summary-subcard__content--tasks">
              <button
                type="button"
                class="task-launch-card"
                id="openTaskModal"
                data-task-id="1"
                data-task-modal-target="analysisTaskModal"
                data-state="ready"
                aria-haspopup="dialog"
                aria-controls="analysisTaskModal"
              >
                <span class="task-launch-card__title" id="taskLaunchTitle">Task 1</span>
                <span class="task-launch-card__subtitle">Open the task workspace</span>
              </button>
              <button
                type="button"
                class="task-launch-card"
                data-task-modal-target="analysisTaskModal"
                data-task-label="Task 2"
                data-task-id="2"
                data-state="ready"
                aria-haspopup="dialog"
                aria-controls="analysisTaskModal"
              >
                <span class="task-launch-card__title">Task 2</span>
                <span class="task-launch-card__subtitle">Open the task workspace</span>
              </button>
              <button
                type="button"
                class="task-launch-card"
                data-task-modal-target="analysisTaskModal"
                data-task-label="Task 3"
                data-task-id="3"
                data-state="ready"
                aria-haspopup="dialog"
                aria-controls="analysisTaskModal"
              >
                <span class="task-launch-card__title">Task 3</span>
                <span class="task-launch-card__subtitle">Open the task workspace</span>
              </button>
            </div>
          </section>
        </div>
      </article>
    </div>

    <div id="editorLocked" class="note-box" role="alert">
      <strong>Access restricted.</strong>
      <span id="editorLockMsg"> Admin sign-in required to use this page.</span>
      <button class="btn small" data-open-auth="signin">Sign in</button>
    </div>

    <div
      id="costSnapshotModal"
      class="modal"
      hidden
      role="dialog"
      aria-modal="true"
      aria-labelledby="costSnapshotTitle"
    >
      <div class="modal__backdrop" data-close-cost aria-hidden="true"></div>
      <div class="modal__dialog modal__dialog--cost">
        <header class="modal__header">
          <h2 id="costSnapshotTitle">Cost snapshot</h2>
          <button type="button" class="btn small ghost" id="closeCostModal">Close</button>
        </header>
        <div class="modal__body modal__body--cost">
          <p class="cost-meter__status" id="costBalanceStatus">Add your API key and refresh to load usage.</p>
          <div class="cost-meter">
            <div class="cost-meter__stats">
              <div>
                <p class="cost-meter__label">Provider</p>
                <p class="cost-meter__value" id="costProviderLabel">OpenRouter</p>
              </div>
              <div>
                <p class="cost-meter__label">Remaining</p>
                <p class="cost-meter__value" id="costRemainingValue">—</p>
              </div>
              <div>
                <p class="cost-meter__label">Total usage</p>
                <p class="cost-meter__value" id="costUsageValue">—</p>
              </div>
            </div>
            <div class="cost-meter__actions">
              <button type="button" class="btn small" id="refreshCostBalance">Refresh balance</button>
              <button type="button" class="btn small ghost" id="captureCostSnapshot">Save snapshot</button>
            </div>
            <div class="cost-meter__manual">
              <label for="costManualUsage">Manual usage override</label>
              <div class="cost-meter__manual-row">
                <input
                  type="number"
                  id="costManualUsage"
                  inputmode="decimal"
                  placeholder="Enter usage value"
                  min="0"
                  step="0.0001"
                />
                <select id="costManualUnit">
                  <option value="credits">Credits</option>
                  <option value="tokens">Tokens</option>
                  <option value="usd">USD</option>
                </select>
              </div>
              <p class="muted-small">Use when the API response is unavailable. Values stay in this browser only.</p>
            </div>
          </div>
          <section class="cost-history" aria-labelledby="costSnapshotHistoryTitle">
            <div class="cost-history__head">
              <h3 id="costSnapshotHistoryTitle">Saved snapshots</h3>
              <button type="button" class="btn small ghost" id="clearCostSnapshots">Clear history</button>
            </div>
            <p class="muted-small" id="costSnapshotsEmpty">No snapshots saved yet. Capture one before and after each run to measure costs.</p>
            <ul class="cost-history__list" id="costSnapshotsList"></ul>
          </section>
        </div>
        <footer class="modal__footer modal__footer--cost">
          <span class="muted-small">Snapshots are stored locally for run-to-run comparisons.</span>
          <button type="button" class="btn ghost" id="closeCostModalFooter">Close</button>
        </footer>
      </div>
    </div>

    <div
      id="automationSettingsModal"
      class="modal"
      hidden
      role="dialog"
      aria-modal="true"
      aria-labelledby="automationSettingsTitle"
    >
      <div class="modal__backdrop" data-close-automation aria-hidden="true"></div>
      <div class="modal__dialog modal__dialog--automation">
        <header class="modal__header">
          <h2 id="automationSettingsTitle">Automation settings</h2>
          <button type="button" class="btn small ghost" id="closeAutomationModal">Close</button>
        </header>
        <div class="modal__body modal__body--automation">
          <aside class="modal__sidebar automation-modal__sidebar">
            <h3>Desk automation overview</h3>
            <p>Prep automation runs to accelerate equity coverage workflows.</p>
            <ul class="automation-modal__list">
              <li>Stage single-task automations to refresh key research outputs.</li>
              <li>Chain multiple tasks together for full desk playbooks.</li>
              <li>Review recent error signals before enabling schedules.</li>
            </ul>
            <div
              class="automation-stats"
              data-scheduled="5"
              data-errors="0"
              data-scheduled-meta="3 multi-step · 2 single"
              data-error-meta="Last incident resolved 4d ago"
              aria-label="Current automation health"
            >
              <div class="automation-stats__item">
                <span class="automation-stats__icon automation-stats__icon--scheduled" aria-hidden="true">⏱</span>
                <div>
                  <p class="automation-stats__label">Scheduled runs</p>
                  <p class="automation-stats__value" data-automation-field="scheduled-value">5</p>
                  <p class="automation-stats__meta" data-automation-field="scheduled-meta">3 multi-step · 2 single</p>
                </div>
              </div>
              <div class="automation-stats__item">
                <span class="automation-stats__icon automation-stats__icon--errors" data-automation-field="error-icon" aria-hidden="true">✔</span>
                <div>
                  <p class="automation-stats__label">Error status</p>
                  <p class="automation-stats__value" data-automation-field="error-value">0 issues</p>
                  <p class="automation-stats__meta" data-automation-field="error-meta">Last incident resolved 4d ago</p>
                </div>
              </div>
            </div>
          </aside>
          <form class="modal__content automation-form" id="automationSettingsForm">
            <section class="automation-form__section" aria-labelledby="automationDetailsHeading">
              <h4 id="automationDetailsHeading">Run details</h4>
              <div class="automation-form__fields">
                <div class="automation-field">
                  <label for="automationName">Automation name</label>
                  <input id="automationName" name="automationName" type="text" placeholder="E.g. Monday open coverage sweep" autocomplete="off" />
                </div>
                <div class="automation-field">
                  <label for="automationScope">Coverage scope</label>
                  <input id="automationScope" name="automationScope" type="text" placeholder="Universe focus, portfolio, or ticker list" autocomplete="off" />
                </div>
                <div class="automation-field">
                  <label for="automationOwner">Owner</label>
                  <input id="automationOwner" name="automationOwner" type="text" placeholder="Desk lead or channel" autocomplete="off" />
                </div>
              </div>
            </section>
            <section class="automation-form__section" aria-labelledby="automationTypeHeading">
              <h4 id="automationTypeHeading">Run type</h4>
              <div class="automation-radio-group" role="radiogroup" aria-labelledby="automationTypeHeading">
                <label class="automation-radio">
                  <input type="radio" name="automationMode" value="single" checked />
                  <span class="automation-radio__label">
                    Single task
                    <span class="automation-radio__hint">Trigger one workflow with custom parameters.</span>
                  </span>
                </label>
                <label class="automation-radio">
                  <input type="radio" name="automationMode" value="sequence" />
                  <span class="automation-radio__label">
                    Multi-step sequence
                    <span class="automation-radio__hint">Chain multiple desk tasks into one scheduled run.</span>
                  </span>
                </label>
              </div>
              <div class="automation-form__fields">
                <div class="automation-field">
                  <label for="automationFrequency">Schedule</label>
                  <select id="automationFrequency" name="automationFrequency">
                    <option value="once">One time</option>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                  </select>
                </div>
                <div class="automation-field">
                  <label for="automationStart">Next run</label>
                  <input id="automationStart" name="automationStart" type="datetime-local" />
                </div>
              </div>
            </section>
            <section class="automation-form__section" aria-labelledby="automationTasksHeading" id="automationSequenceGroup" hidden>
              <h4 id="automationTasksHeading">Task sequence</h4>
              <p class="automation-field" style="margin:0;color:var(--muted,#64748b);font-size:.85rem">Select tasks and set their order for multi-step automations.</p>
              <div class="automation-tasks">
                <label class="automation-task-item">
                  <input type="checkbox" name="automationTasks" value="coverage-refresh" />
                  <div class="automation-task-item__body">
                    <span class="automation-task-item__title">Coverage refresh memo</span>
                    <span class="automation-task-item__hint">Generate the latest research summary for active tickers.</span>
                  </div>
                </label>
                <label class="automation-task-item">
                  <input type="checkbox" name="automationTasks" value="price-monitor" />
                  <div class="automation-task-item__body">
                    <span class="automation-task-item__title">Price monitor alert</span>
                    <span class="automation-task-item__hint">Surface price targets that crossed guardrails overnight.</span>
                  </div>
                </label>
                <label class="automation-task-item">
                  <input type="checkbox" name="automationTasks" value="catalyst-brief" />
                  <div class="automation-task-item__body">
                    <span class="automation-task-item__title">Catalyst brief</span>
                    <span class="automation-task-item__hint">Send upcoming catalysts and call scripts to the desk.</span>
                  </div>
                </label>
              </div>
            </section>
            <section class="automation-form__section" aria-labelledby="automationAdvancedHeading">
              <h4 id="automationAdvancedHeading">Advanced options</h4>
              <div class="automation-advanced">
                <label class="automation-task-item" style="border-style:solid;background:rgba(37,99,235,.08);gap:12px;align-items:center;">
                  <input type="checkbox" name="automationPreview" value="true" />
                  <div class="automation-task-item__body">
                    <span class="automation-task-item__title">Require preview approval</span>
                    <span class="automation-task-item__hint">Send a Slack or email summary before automations execute.</span>
                  </div>
                </label>
                <div class="automation-field">
                  <label for="automationNotes">Notes &amp; context</label>
                  <textarea id="automationNotes" name="automationNotes" placeholder="Add guidance, links, or data sources for the automation run."></textarea>
                </div>
                <div class="automation-field">
                  <label for="automationNotifications">Notification channel</label>
                  <input id="automationNotifications" name="automationNotifications" type="text" placeholder="E.g. #desk-automation or research@futurefunds.com" autocomplete="off" />
                </div>
              </div>
            </section>
          </form>
        </div>
        <footer class="modal__footer">
          <span class="automation-footer__note">Automations save automatically when launched.</span>
          <button type="button" class="btn ghost" id="cancelAutomationModal">Cancel</button>
          <button type="submit" form="automationSettingsForm" class="btn primary">Save &amp; schedule</button>
        </footer>
      </div>
    </div>

    <div id="analysisTaskModal" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="analysisTaskTitle">
      <div class="modal__backdrop" data-close-task aria-hidden="true"></div>
      <div class="modal__dialog modal__dialog--task">
        <header class="modal__header modal__header--task">
          <h2 class="analysis-task__title" id="analysisTaskTitle">Task</h2>
          <button type="button" class="btn small ghost" id="closeTaskModal">Close</button>
        </header>
        <div class="modal__body modal__body--task">
          <div id="taskLockedMessage" class="task-locked-message" hidden tabindex="-1" role="alert">
            <h3>Task workspace locked</h3>
            <p id="taskLockedMessageText">Sign in with an admin account to open the task workspace.</p>
            <button class="btn small" type="button" id="taskLockedAction" data-open-auth="signin">Sign in</button>
          </div>
          <form id="analysisForm" class="editor-grid" hidden>
            <section class="analysis-task" aria-label="Task workspace">
              <section class="analysis-task__panel analysis-task__config" aria-label="Task setup">
                <div class="task-name-field">
                  <label for="taskName">Task name</label>
                  <input id="taskName" type="text" placeholder="Name this task" autocomplete="off" />
                  <p class="muted-small">Appears in the task header below.</p>
                </div>
                <div class="ai-structures">
                  <div class="field-row">
                    <div>
                      <label for="aiModel">Model</label>
                      <div class="select-edit">
                        <select id="aiModel"></select>
                        <button type="button" class="btn small ghost" id="editModelList">Edit list</button>
                      </div>
                      <p class="muted-small">Select from saved OpenRouter models or edit the list for this workspace.</p>
                    </div>
                    <div>
                      <label for="aiKey">AI API key</label>
                      <input id="aiKey" type="password" placeholder="Paste your OpenRouter key" autocomplete="off" />
                      <div class="ai-key-actions">
                        <button type="button" class="btn small ghost" id="refreshAiKey">Refresh from Supabase</button>
                        <span class="muted-small" id="aiKeyStatus" role="status" aria-live="polite"></span>
                      </div>
                      <p class="muted-small">Stored locally in this browser. Admins can refresh to sync the server key used for AI calls.</p>
                      <p class="ai-key-preview" id="aiKeyPreview" hidden>Active key: <code id="aiKeyPreviewValue"></code></p>
                    </div>
                  </div>
                </div>
              </section>
              <div class="analysis-task__grid">
                <section class="analysis-source analysis-task__panel" aria-label="Analysis input">
                  <div class="analysis-source__head">
                    <label for="analysisRaw" style="margin:0;font-weight:600">Analysis input</label>
                    <div class="analysis-source__modes" role="tablist">
                      <button type="button" class="analysis-mode-btn active" data-analysis-mode="manual">Paste analysis</button>
                      <button type="button" class="analysis-mode-btn" data-analysis-mode="ai">Generate via AI</button>
                    </div>
                  </div>
                  <div class="analysis-source__panel" data-panel="manual">
                    <p class="analysis-source__panel-note">Paste the full master analysis markdown below, then parse it to fill the fields automatically.</p>
                  </div>
                  <div class="analysis-source__panel analysis-ai-grid" data-panel="ai" hidden>
                    <p class="muted-small">Update the coverage target above to tailor the AI prompt.</p>
                    <div>
                      <label>Prompt template</label>
                      <div class="prompt-selector">
                        <button type="button" class="btn ghost" id="promptSelectBtn"><span id="promptSelectLabel">Select prompt</span> ▾</button>
                        <button type="button" class="btn small ghost" id="openPromptEditor">Prompt editor</button>
                        <div class="prompt-menu" id="promptMenu" hidden role="menu"></div>
                      </div>
                      <p class="muted-small" id="promptSummary">Loading prompts…</p>
                      <pre id="promptPreview" class="prompt-preview" hidden></pre>
                    </div>
                    <p class="muted-small">Update the Tasks panel above to select a model and manage the API key before generating.</p>
                    <div>
                      <label for="aiNotes">Angle or extra guidance (optional)</label>
                      <textarea id="aiNotes" placeholder="Key catalysts, data points or tone adjustments"></textarea>
                    </div>
                    <div class="analysis-source__actions">
                      <button type="button" class="btn primary" id="generateAnalysis">Generate analysis</button>
                      <span class="muted-small">The generated report fills the box below.</span>
                    </div>
                  </div>
                  <textarea id="analysisRaw" name="analysis_raw" placeholder="Paste the MASTER STOCK ANALYSIS markdown output here"></textarea>
                  <div class="analysis-source__actions">
                    <button type="button" class="btn" id="parseAnalysis">Parse analysis into fields</button>
                    <button type="button" class="btn ghost" id="clearAnalysis">Clear</button>
                    <span id="analysisStatus" class="analysis-status muted-small" role="status"></span>
                  </div>
                </section>

                <section class="analysis-export analysis-task__panel" aria-label="Export results">
                  <h3 class="analysis-export__title">Export - Results</h3>
                  <div class="analysis-export__fields">
                    <div class="field-row">
                      <div>
                        <label for="analysisDate">Date</label>
                        <input id="analysisDate" name="date" type="date" required />
                      </div>
                      <div>
                        <label for="analysisTags">Tags (comma separated)</label>
                        <input id="analysisTags" name="tags" placeholder="AI, Earnings, Value" />
                        <p class="muted-small">Used for filtering. Example: AI, Earnings, Value.</p>
                      </div>
                    </div>

                    <div>
                      <label for="analysisTopic">Topic</label>
                      <input id="analysisTopic" name="topic" placeholder="Reverse DCF — Company" required />
                    </div>

                    <div>
                      <label for="analysisConclusion">Conclusion</label>
                      <textarea id="analysisConclusion" name="conclusion" placeholder="Summarize the key takeaway." required></textarea>
                    </div>

                    <div>
                      <label for="analysisFindings">Key findings (one per line)</label>
                      <textarea id="analysisFindings" name="findings" placeholder="Finding #1\nFinding #2"></textarea>
                    </div>

                    <div>
                      <label for="analysisVisual">Visual/Table markdown</label>
                      <textarea id="analysisVisual" name="visual" placeholder="|Scenario|Rev CAGR|..."></textarea>
                    </div>

                    <div>
                      <label for="analysisPrompt">Prompt used (optional, debug)</label>
                      <textarea id="analysisPrompt" name="prompt" placeholder="Paste the LLM prompt for auditing"></textarea>
                    </div>
                  </div>
                  <div class="analysis-export__actions">
                    <button class="btn primary" type="submit">Publish to Universe</button>
                    <button class="btn" type="button" id="resetForm">Reset</button>
                    <span id="formMsg" class="muted"></span>
                  </div>
                </section>
              </div>
            </section>
          </form>
        </div>
      </div>
    </div>

    <section id="recentSection" hidden>
      <header style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin:28px 0 12px">
        <h2 style="margin:0">Recent entries</h2>
        <button class="btn small" type="button" id="refreshRecent">Refresh</button>
      </header>
      <div id="recentList" class="recent-list"></div>
    </section>
  </main>

  <div id="modelEditorModal" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="modelEditorTitle">
    <div class="modal__backdrop" data-close-model></div>
    <div class="modal__dialog" style="max-width:620px">
      <header class="modal__header">
        <h2 id="modelEditorTitle" style="margin:0;font-size:1.1rem">Update model options</h2>
        <button type="button" class="btn small ghost" id="closeModelEditor">Close</button>
      </header>
      <div class="modal__content modal__content--stack">
        <div class="model-editor" id="modelEditor">
          <div>
            <label for="modelEditorInput" style="font-weight:600">OpenRouter models for this workspace</label>
            <textarea id="modelEditorInput" placeholder="openrouter/auto | OpenRouter Auto"></textarea>
            <p class="muted-small">One model per line. Use <code>model-id | Friendly label</code>. First model becomes the default.</p>
          </div>
          <p class="model-editor__status" id="modelEditorStatus" role="status" aria-live="polite"></p>
        </div>
      </div>
      <footer class="modal__footer">
        <button type="button" class="btn small ghost" id="cancelModelList">Cancel</button>
        <button type="button" class="btn small primary" id="saveModelList">Save list</button>
      </footer>
    </div>
  </div>

  <div id="promptEditorModal" class="modal" hidden role="dialog" aria-modal="true" aria-labelledby="promptEditorTitle">
    <div class="modal__backdrop" data-close-prompt></div>
    <div class="modal__dialog">
      <header class="modal__header">
        <h2 id="promptEditorTitle" style="margin:0;font-size:1.15rem">Prompt library</h2>
        <button type="button" class="btn small ghost" id="closePromptEditor">Close</button>
      </header>
      <div class="modal__body">
        <aside class="modal__sidebar">
          <div class="prompt-editor__sidebar-actions">
            <strong style="font-size:.95rem">Saved prompts</strong>
            <button type="button" class="btn small ghost" id="addPromptTemplate">New</button>
          </div>
          <div id="promptEditorList" class="prompt-editor__list"></div>
        </aside>
        <div class="modal__content">
          <form id="promptEditorForm" class="prompt-editor__form">
            <input type="hidden" id="promptEditorId" />
            <div class="prompt-editor__row">
              <div class="field-group">
                <label for="promptEditorName">Name</label>
                <input id="promptEditorName" name="name" placeholder="Deep research" required />
              </div>
              <div class="field-group">
                <label for="promptEditorSlug">Slug (optional)</label>
                <input id="promptEditorSlug" name="slug" placeholder="deep-research" />
                <p class="muted-small" id="promptEditorSlugHelp">Short identifier with letters, numbers or dashes. Leave blank to auto-generate.</p>
              </div>
              <div class="field-group">
                <label for="promptEditorSortOrder">Sort order</label>
                <input id="promptEditorSortOrder" name="sort_order" type="number" min="0" step="1" placeholder="100" />
                <p class="muted-small">Lower numbers appear higher in the picker. Leave blank for default ordering.</p>
              </div>
            </div>
            <div class="field-group">
              <label for="promptEditorDescription">Summary</label>
              <textarea id="promptEditorDescription" name="description" placeholder="Short summary for the selector"></textarea>
            </div>
            <div class="field-group">
              <label for="promptEditorText">Prompt template</label>
              <textarea id="promptEditorText" name="prompt_text" placeholder="Write the AI template here" required></textarea>
              <p class="muted-small">Use template tags like <code>{{company}}</code>, <code>{{ticker}}</code> or <code>{{notes_block}}</code> as needed.</p>
            </div>
            <div class="prompt-editor__toggles">
              <label class="prompt-editor__toggle"><input type="checkbox" id="promptEditorDefault" name="is_default" /> Default prompt</label>
              <label class="prompt-editor__toggle"><input type="checkbox" id="promptEditorArchived" name="archived" /> Archived</label>
            </div>
            <p class="muted-small">Set "Default" to auto-select this template. Archive a prompt to hide it from the picker without deleting it.</p>
            <p id="promptEditorStatus" class="muted-small prompt-editor__status"></p>
          </form>
        </div>
      </div>
      <footer class="modal__footer">
        <button type="button" class="btn danger" id="deletePromptEditor" disabled>Delete prompt</button>
        <button type="button" class="btn ghost" id="cancelPromptEditor">Cancel</button>
        <button type="submit" class="btn primary" form="promptEditorForm" id="savePromptEditor">Save prompt</button>
      </footer>
    </div>
  </div>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-col footer-about">
        <a class="brand" href="/">
          <img src="/images/logo.webp" alt="FutureFunds.ai logo" class="logo" />
          <span>FutureFunds.ai</span>
        </a>
        <p class="muted">Researching how AI can run the investment process in public. Educational only.</p>
      </div>
      <div class="footer-col footer-links">
        <h3 class="footer-heading">Explore</h3>
        <ul class="footer-links-list">
          <li><a href="/team.html">Experiment</a></li>
          <li><a href="/tools.html">Investment Tools</a></li>
          <li><a href="/portfolio.html">Portfolios</a></li>
          <li><a href="/blog.html">Commentary</a></li>
        </ul>
      </div>
      <div class="footer-col footer-links">
        <h3 class="footer-heading">Legal &amp; Access</h3>
        <ul class="footer-links-list">
          <li><a href="/disclaimer.html">Disclaimer &amp; Disclosures</a></li>
          <li><a href="/membership.html">Membership</a></li>
          <li><a href="/login.html">Member Login</a></li>
          <li><a href="/editor.html">Editor (admin)</a></li>
        </ul>
      </div>
      <div class="footer-col footer-newsletter">
        <h3 class="footer-heading">Stay in the loop</h3>
        <p class="muted">Sign up for updates on new research drops and product releases.</p>
        <form class="newsletter-form" novalidate>
          <label class="sr-only" for="newsletter-email">Email address</label>
          <input id="newsletter-email" type="email" name="email" placeholder="you@example.com" autocomplete="email" required />
          <button type="submit" class="btn primary">Join the list</button>
        </form>
        <p class="newsletter-status muted" aria-live="polite"></p>
      </div>
    </div>
    <div class="footer-bottom">
      <small>© <span id="year"></span> FutureFunds.ai. Educational experiment. Not investment advice.</small>
      <div class="footer-legal">
        <a href="/disclaimer.html">Disclaimer</a>
        <a href="/sitemap.xml">Sitemap</a>
        <a href="/editor.html">Editor</a>
      </div>
    </div>
  </footer>


  <script src="/assets/app.js" defer></script>
  <script src="/assets/i18n.js" defer></script>
  <script src="/assets/paywall.js" defer></script>
  <script type="module" src="/assets/auth.js"></script>
  <script type="module" src="/assets/editor.js"></script>
</body>
</html>
